<!--
Author: W3layouts
Author URL: http://w3layouts.com
License: Creative Commons Attribution 3.0 Unported
License URL: http://creativecommons.org/licenses/by/3.0/
-->
<!DOCTYPE html>
<html>

<head>
	<title>Danh sách Sách</title>
	<!--/tags -->
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<script type="application/x-javascript">
		addEventListener("load", function () {
			setTimeout(hideURLbar, 0);
		}, false);

		function hideURLbar() {
			window.scrollTo(0, 1);
		}
	</script>

	<link href="css/bootstrap.min.css" rel="stylesheet" type="text/css" media="all" />
	<link href="css/style_client.css" rel="stylesheet" type="text/css" media="all" />
	<link rel="stylesheet" href="css/my_custom.css">
	<link href="css/font-awesome.css" rel="stylesheet">
	<link rel="stylesheet" href="css/my_custom.css">
	<style>
		.CHON {
			opacity: 0.2;
			filter: alpha(opacity=20);
			/*IE 5-7*/
		}
	</style>
</head>

<body>
	<div class="container">
		<div class="row">
			<div class="col-md-4 col-xs-12 book-mt10">
				<input placeholder="Bạn muốn tìm sách gì ?" type="text" onkeyup="KeyCode(event)" id="Th_Gia_tri_Tim">
				<i class="fa fa-search" id="Th_Tim"></i>
			</div>
			<div class="col-md-8 col-xs-12 book-mt10">
				<select class="btn btn-success" onchange="Xuat_Sach_theo_Don_gia(this.value)">
					<option value="0-900000">Lọc Sách theo Đơn giá Bán</option>
					<option value="0-200000">Giá dưới 200.000</option>
					<option value="200000-400000">Giá lớn từ 200.000 đến 400.000</option>
					<option value="400000-900000">Giá từ 400.000 đến 900.000</option>
				</select>
				<button class="btn btn-primary" style="margin-left: 5px;" id="Th_Tang" onclick="Sap_Tang()">
					<i class="fa fa-sort-alpha-asc">&nbsp;Sắp tăng</i>
					<button class="btn btn-primary" style="margin-left:5px;" id="Th_Giam" onclick="Sap_Giam()">
						<i class="fa fa-sort-alpha-desc">&nbsp;Sắp giảm</i>
			</div>
		</div>
	</div>
	<div class="container">
		<div id="Th_Thong_bao"></div>
		<div class="row" id="Th_Cha"></div>
	</div>
	</div>
	</div>

	<script type="text/javascript" src="js/jquery-2.1.4.min.js"></script>
	<script type="text/javascript" src="js/bootstrap.js"></script>
	<script src="../Xu_ly/Xu_ly_3L.js"></script>
	<script>
		var Du_lieu = Doc_Danh_sach_Sach();
		var Danh_sach_Sach = Du_lieu.Danh_sach_Sach
		if (Danh_sach_Sach.length > 0) {
			Danh_sach_Sach.sort((a, b) => a.Ten.localeCompare(b.Ten))
			Xuat_Danh_Sach_Tong(Danh_sach_Sach, Th_Thong_bao)
		} else {
			Th_Thong_bao.innerHTML = "Lỗi đọc dữ liệu"
		}

		function Xuat_Danh_Sach_Tong(Danh_sach_Sach, Th_thong_bao) {
			Th_Cha.innerHTML = ""
			Danh_sach_Sach.forEach(Sach => {
				var The_hien = Tao_The_hien_Sach(Sach, Th_Cha)
				The_hien.onclick = () => {
					The_hien.childNodes[0].classList.toggle("CHON");
				}

			});
			Th_Thong_bao.innerHTML =
				`<h2 class="alert alert-success book-mt10 text-center">Danh sách có tất cả <span style="color:red">${Danh_sach_Sach.length}</span> cuốn sách</h2>`
		}

		Th_Tim.onclick = () => {
			var gtTim = Th_Gia_tri_Tim.value;
			var Danh_sach_Sach_tim = Danh_sach_Sach.filter(x => x.Ten.toLowerCase().includes(gtTim.toLowerCase()));
			Xuat_Danh_Sach_Tong(Danh_sach_Sach_tim, Th_Thong_bao);
			Th_Gia_tri_Tim.value = "";
		}

		function KeyCode(event) {
			if (event.keyCode == 13) {
				var gtTim = event.target.value;
				var Danh_sach_Sach_tim = Danh_sach_Sach.filter(x => x.Ten.toLowerCase().includes(gtTim.toLowerCase()));
				Xuat_Danh_Sach_Tong(Danh_sach_Sach_tim, Th_Thong_bao);
			}
		}

		function Xuat_Sach_theo_Don_gia(chuoi_dieu_kien) {
			var Thanh_phan_con = chuoi_dieu_kien.split('-')
			if (Thanh_phan_con.length > 0) {

				var Danh_sach_Sach_theo_Gia = Danh_sach_Sach.filter(x => x.Don_gia_Ban >=
					Thanh_phan_con[0] &&
					x.Don_gia_Ban <= Thanh_phan_con[1])
				Xuat_Danh_Sach_Tong(Danh_sach_Sach_theo_Gia, Th_Thong_bao)
			}
		}

		function Sap_Tang() {
			Danh_sach_Sach.sort((a, b) => a.Ten.localeCompare(b.Ten))
			Xuat_Danh_Sach_Tong(Danh_sach_Sach, Th_Thong_bao)
		}

		function Sap_Giam() {
			Danh_sach_Sach.sort((a, b) => b.Ten.localeCompare(a.Ten))
			Xuat_Danh_Sach_Tong(Danh_sach_Sach, Th_Thong_bao)
		}
	</script>

</body>

</html>